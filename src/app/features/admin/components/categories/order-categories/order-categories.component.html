<ng-container *ngIf="categories$ | async as categories">
    <div class="nyk-order-categories-header">Kategóriák rendezése</div>

    <p class="block font-medium text-900 mb-2 text-lg">Főkategóriák</p>

    <div
        cdkDropList
        cdkDropListOrientation="vertical"
        class="nyk-order-categories-main-categories"
        (cdkDropListDropped)="dropMainCategory(categories, $event)">
        <div
            *ngFor="let category of categories"
            class="nyk-order-categories-category"
            [class.selected]="selectedCategory?.id === category.id"
            (click)="onSelectCategory(category)"
            cdkDragBoundary=".drag-boundary"
            cdkDrag>
            {{ category.name }}
        </div>
    </div>

    <p-button
        [raised]="true"
        label="Főkategoriák sorrend mentése"
        [disabled]="!isMainCategoriesOrderChanged"
        styleClass="p-button p-button mt-3 w-full"
        (click)="onUpdateCategoryOrder(categories, false)">
    </p-button>

    <ng-container *ngIf="selectedCategory">
        <p class="block font-medium text-900 mb-2 text-lg mt-5">
            {{ selectedCategory.name }} alkategóriák
        </p>

        <div
            class="nyk-order-categories-sub-categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            (cdkDropListDropped)="dropSubCategory(selectedCategory.subCategories, $event)">
            <div
                *ngFor="let category of selectedCategory.subCategories"
                class="nyk-order-categories-category"
                cdkDrag
                cdkDragBoundary=".drag-boundary">
                {{ category.name }}
            </div>
        </div>

        <p-button
            [raised]="true"
            label="Alkategóriák sorrend mentése"
            [disabled]="!isSubCategoriesOrderChanged"
            styleClass="p-button p-button mt-3 w-full"
            (onClick)="onUpdateCategoryOrder(selectedCategory.subCategories, true)">
        </p-button>
    </ng-container>
</ng-container>
