<i class="pi pi-times close" mat-dialog-close></i>
<h2 mat-dialog-title>Kategória szerkesztése</h2>

<mat-dialog-content>
  <span class="text-sm">
    Módosítva: {{ data.updatedAt | date : "yyy, MMM dd '-' hh:mm a" }}
  </span>

  <form [formGroup]="editCategoryForm" class="mt-2">
    <div class="mb-4">
      <ng-container *ngIf="data.type === CategoryType.PRODUCT_CATEGORY">
        <p-badge
          value="Termék kategória"
          severity="success"
          size="large"></p-badge>
      </ng-container>

      <ng-container *ngIf="data.type === CategoryType.MATERIAL_CATEGORY">
        <p-badge
          value="Minta kategória"
          severity="warning"
          size="large"></p-badge>
      </ng-container>

      <ng-container *ngIf="data.type === CategoryType.INSPIRATION_CATEGORY">
        <p-badge value="Inspiració kategória" size="large"></p-badge>
      </ng-container>
    </div>

    <div class="form-group">
      <label for="name" class="block font-medium text-blue-500 mb-1">
        Kategória neve
      </label>

      <input id="name" formControlName="name" type="text" pInputText />
    </div>

    <ng-container *ngIf="data.type === CategoryType.PRODUCT_CATEGORY">
      <div class="form-group">
        <label
          for="description"
          class="block font-medium text-blue-500 mb-1 text-lg">
          Kategória leírása
        </label>

        <textarea
          rows="5"
          cols="30"
          pInputTextarea
          [autoResize]="true"
          formControlName="description"></textarea>
      </div>
    </ng-container>

    <div class="form-group">
      <label class="block font-medium text-blue-500 mb-1">Kategória képe</label>

      <p-button
        *ngIf="!imagePreview"
        icon="pi pi-image"
        styleClass="p-button p-button-secondary"
        (click)="imagePicker.click()">
      </p-button>

      <input
        type="file"
        class="hidden"
        #imagePicker
        (change)="onImagePicked($event)" />

      <img
        *ngIf="imagePreview"
        class="mb-2 image-preview"
        [src]="imagePreview"
        alt="Inspiration" />

      <button
        *ngIf="imagePreview"
        pButton
        pRipple
        pTooltip="Kép törlése"
        tooltipPosition="bottom"
        (click)="onImageClear(imagePicker)"
        type="button"
        icon="pi pi-times"
        class="p-button p-button-danger p-button"></button>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions class="flex justify-content-end">
  <p-button
    label="Mégsem"
    styleClass="p-button-outlined p-button-danger mr-4"
    mat-dialog-close>
  </p-button>

  <p-button
    label="Módosítás"
    styleClass="p-button"
    [disabled]="!editCategoryForm.dirty || !editCategoryForm.valid"
    (click)="onEditCategory()">
  </p-button>
</mat-dialog-actions>
