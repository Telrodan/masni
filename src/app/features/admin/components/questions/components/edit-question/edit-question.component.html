<i class="pi pi-times close" mat-dialog-close></i>

<h2 mat-dialog-title>Kérdés szerkesztese</h2>

<mat-dialog-content>
  <div class="content">
    <form [formGroup]="editQuestionForm">
      <div class="form-group">
        <label for="questionName" class="block font-medium text-blue-500 mb-1">
          Kérdés neve
        </label>

        <input
          id="questionName"
          formControlName="questionName"
          type="text"
          pInputText />
      </div>

      <div class="form-group">
        <label for="question" class="block font-medium text-blue-500 mb-1">
          Kérdés
        </label>

        <input
          id="question"
          formControlName="question"
          type="text"
          pInputText />
      </div>

      <div class="form-group">
        <label for="option" class="block font-medium text-blue-500 mb-1">
          Választási lehetőség
        </label>

        <input id="option" formControlName="option" type="text" pInputText />
      </div>

      <div class="form-group">
        <label for="isExtraPrice" class="block font-medium text-blue-500 mb-1">
          Van a lehetőségnek extra ára?
        </label>

        <p-checkbox
          formControlName="isExtraPrice"
          [binary]="true"
          inputId="isExtraPrice"></p-checkbox>
      </div>

      <div class="form-group" *ngIf="editQuestionForm.value.isExtraPrice">
        <label for="extraPrice" class="block font-medium text-blue-500 mb-1">
          Lehetőség extra ára
        </label>

        <p-inputNumber
          inputId="extraPrice"
          formControlName="extraPrice"></p-inputNumber>
      </div>

      <p-button
        label="Lehetőség hozzáadása"
        icon="pi pi-plus"
        (click)="addOption()"></p-button>
    </form>

    <div class="preview">
      <h3 class="font-medium text-blue-500 mb-1">Előnézet</h3>

      <h4 class="font-medium text-500 mb-1">
        {{ editQuestionForm.value.questionName }}
      </h4>

      <ng-container *ngIf="editQuestionForm.value.options.length">
        <div class="form-group">
          <label for="option" class="block font-medium text-blue-500 mb-1">
            {{ editQuestionForm.value.question }}
          </label>

          <p-dropdown
            [options]="editQuestionForm.value.options"
            optionLabel="slug"
            styleClass="w-full">
          </p-dropdown>
        </div>

        <h3 class="font-medium text-blue-500 mb-1">Lehetőségek</h3>

        <div
          class="option-wrapper mb-2"
          *ngFor="let option of editQuestionForm.value.options; let i = index">
          <p class="block font-medium text-800 mb-1">
            {{ i + 1 }}. {{ option?.slug }}
          </p>

          <p-button
            icon="pi pi-times"
            styleClass="p-button-danger"
            (click)="deleteOption(i)">
          </p-button>
        </div>
      </ng-container>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions class="flex justify-content-end">
  <p-button
    label="Mégsem"
    styleClass="p-button-outlined p-button-danger mr-4"
    mat-dialog-close>
  </p-button>

  <p-button
    type="submit"
    label="Módosítás"
    styleClass="p-button"
    (click)="onSubmit()">
  </p-button>
</mat-dialog-actions>
