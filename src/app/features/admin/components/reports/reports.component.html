<p-card header="Jelentések">
  <div
    class="surface-card shadow-2 border-round flex p-3 flex-column md:flex-row">
    <div
      class="border-bottom-1 md:border-right-1 md:border-bottom-none surface-border flex-auto p-3">
      <div class="flex align-items-center mb-3">
        <i class="pi pi-users text-blue-500 text-xl mr-2"></i>
        <span class="text-500 font-medium">Felhasználok</span>
      </div>
      <span class="block text-900 font-medium mb-4 text-xl">{{
        usersCount$ | async
      }}</span>
    </div>
    <div
      class="border-bottom-1 md:border-right-1 md:border-bottom-none surface-border flex-auto p-3">
      <div class="flex align-items-center mb-3">
        <i class="pi pi-file text-orange-500 text-xl mr-2"></i>
        <span class="text-500 font-medium">Rendelések</span>
      </div>
      <span class="block text-900 font-medium mb-4 text-xl">{{
        ordersCount$ | async
      }}</span>
    </div>
    <div
      class="border-bottom-1 md:border-right-1 md:border-bottom-none surface-border flex-auto p-3">
      <div class="flex align-items-center mb-3">
        <i class="pi pi-chart-bar text-cyan-500 text-xl mr-2"></i>
        <span class="text-500 font-medium">E havi látogatók</span>
      </div>
      <span class="block text-900 font-medium mb-4 text-xl">{{
        (trackingData$ | async)?.thisMonthVisitors
      }}</span>
    </div>
    <div class="flex-auto p-3">
      <div class="flex align-items-center mb-3">
        <i class="pi pi-chart-bar text-purple-500 text-xl mr-2"></i>
        <span class="text-500 font-medium">Összes látogató</span>
      </div>
      <span class="block text-900 font-medium mb-4 text-xl">{{
        (trackingData$ | async)?.allVisitors
      }}</span>
    </div>
  </div>

  <div
    class="surface-card shadow-2 border-round p-4 mt-5"
    *ngIf="logs$ | async as logs">
    <div class="flex align-items-center justify-content-between mb-4">
      <div class="text-900 font-medium text-xl">Logok</div>
    </div>

    <ul class="p-0 mx-0 mt-0 mb-4 list-none">
      <li
        class="flex align-items-center py-2 border-bottom-1 surface-border"
        *ngFor="let log of logs">
        <div
          *ngIf="log.level === 'info'"
          class="w-3rem h-3rem flex align-items-center justify-content-center bg-blue-100 border-circle mr-3 flex-shrink-0">
          <i class="pi pi-info-circle text-xl text-blue-500"></i>
        </div>
        <div
          *ngIf="log.level === 'warn'"
          class="w-3rem h-3rem flex align-items-center justify-content-center bg-orange-100 border-circle mr-3 flex-shrink-0">
          <i class="pi pi-exclamation-triangle text-xl text-orange-500"></i>
        </div>
        <div
          *ngIf="log.level === 'error'"
          class="w-3rem h-3rem flex align-items-center justify-content-center bg-red-100 border-circle mr-3 flex-shrink-0">
          <i class="pi pi-times-circle text-xl text-red-500"></i>
        </div>
        <span class="text-900 line-height-3 font-medium">
          {{ log.message }}
          <span class="text-700 font-normal" *ngIf="log.meta?.user">
            | Felhasználó: {{ log.meta?.user }}
          </span>
          <span class="text-primary font-medium">
            | Időpont:
            {{ log.timestamp | date : 'medium' : 'CEST' }}</span
          >
        </span>
      </li>
    </ul>
  </div>
</p-card>
