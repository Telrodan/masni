<i class="pi pi-times close" mat-dialog-close></i>
<h2 mat-dialog-title>Termék szerkesztése</h2>

<mat-dialog-content>
  <form class="flex-auto p-fluid" [formGroup]="editProductForm">
    <div class="form-group">
      <label for="name" class="block font-medium text-900 mb-2">
        Termék neve
      </label>

      <input id="name" type="text" formControlName="name" pInputText />
    </div>

    <div class="form-group">
      <label for="category" class="block font-medium text-900 mb-2">
        Termék kategória
      </label>

      <p-dropdown
        id="category"
        formControlName="category"
        [options]="categories$ | async"
        placeholder="Válassz egy kategóriát"
        optionValue="id"
        optionLabel="name"
        [showClear]="true"></p-dropdown>
    </div>

    <div class="form-group">
      <label for="shortDescription" class="block font-medium text-900 mb-2">
        Termék rövid leírása
      </label>

      <input
        id="shortDescription"
        type="text"
        formControlName="shortDescription"
        pInputText />
    </div>

    <div class="form-group">
      <label for="description" class="block font-medium text-900 mb-2">
        Termék leírása
      </label>

      <textarea
        id="description"
        formControlName="description"
        type="text"
        pInputTextarea
        rows="5"
        [autoResize]="true"></textarea>
    </div>

    <div class="form-group">
      <label for="images" class="block font-medium text-900 mb-2">
        Termék képek (az első kép lesz mindig a nagy kép)
      </label>

      <p-button
        icon="pi pi-image"
        styleClass="p-button p-button-secondary"
        (click)="imagePicker.click()">
      </p-button>

      <input
        id="images"
        multiple
        class="hidden"
        type="file"
        (change)="onImagesPicked($event)"
        #imagePicker />

      <div class="flex-row images-preview">
        <img
          class="w-2 m-2 inline"
          *ngFor="let image of imagesPreview"
          [src]="image"
          [alt]="editProductForm.value.name" />
      </div>

      <p-button
        *ngIf="imagesPreview.length"
        icon="pi pi-times"
        styleClass="p-button-danger"
        (click)="onImageClear()">
      </p-button>
    </div>

    <div class="form-group">
      <label for="price" class="block font-medium text-900 mb-2">
        Termék ára
      </label>

      <input id="price" formControlName="price" type="text" pInputText />
    </div>

    <div class="form-group">
      <label for="discountedPrice" class="block font-medium text-900 mb-2">
        Termék akciós ára
      </label>

      <input
        id="discountedPrice"
        formControlName="discountedPrice"
        type="text"
        pInputText />
    </div>

    <div class="form-group">
      <label for="stock" class="block font-medium text-900 mb-2">
        Készleten
      </label>

      <input id="stock" formControlName="stock" type="text" pInputText />
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions class="flex justify-content-end">
  <p-button
    label="Mégsem"
    styleClass="p-button p-button-danger mr-4"
    mat-dialog-close>
  </p-button>

  <p-button
    label="Módosítás"
    styleClass="p-button"
    [disabled]="!editProductForm.valid || !editProductForm.dirty"
    (click)="onEditProduct()">
  </p-button>
</mat-dialog-actions>
